<!--
D01_CVB_Step1_XML_last_broadbandplan_on_sub_delete_CM.xml

This request will come from TRIPLE

TRIPLE will send delete on cable modem(stand alone cable modem from emta) only if subscriber has  cable broadband plan as a last plan.

Following services will be deleted:
	1.cpe_composed
	   smp_emta_cm_hsd_access
	
	   
	1. cable broadband service
		- internet_access
		- std_cpe
	(which inturn contain deletion of internet access and std_cpe along with other optional services if any)
-->
<!-- $Id: D01_CVB_Step1_XML_last_broadbandplan_on_sub_delete_CM.xml,v 1.1 2009/11/23 13:29:27 varshag Exp $ -->
<smpsa:executeOrderRequest xmlns:smpsa="http://www.sigma-systems.com/schemas/3.1/SmpServiceActivationSchema"
                           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                           xmlns:cmn="http://java.sun.com/products/oss/xml/Common"
                           xmlns:sa="http://java.sun.com/products/oss/xml/ServiceActivation"
                           xmlns:smpcbe="http://www.sigma-systems.com/schemas/3.1/SmpCBECoreSchema"
                           xmlns:smpcmn="http://www.sigma-systems.com/schemas/3.1/SmpCommonValues"
                           xmlns:cbesvc="http://java.sun.com/products/oss/xml/CBE/Service">
    <smp:orderValue xmlns:smp="http://www.sigma-systems.com/schemas/3.1/SmpServiceActivationSchema"
                    xsi:type="smp:ActionOrderValue">
        <cmn:lastUpdateVersionNumber>-1</cmn:lastUpdateVersionNumber>
        <sa:apiClientId>web</sa:apiClientId>
        <sa:orderKey xsi:type="smp:OrderKeyType">
            <cmn:type>com.sigma.samp.cmn.order.SampOrderKey</cmn:type>
            <sa:primaryKey>-1</sa:primaryKey>
        </sa:orderKey>
        <sa:priority>3</sa:priority>
        <sa:orderState smpState="open.not_running.not_started" xsi:type="smp:SubOrderStateType">
            open.not_running.not_started
        </sa:orderState>
        <smp:subKey>
            <cmn:type>SubSpec:-</cmn:type>
            <smpcbe:primaryKey>-1</smpcbe:primaryKey>
        </smp:subKey>
        <smp:orderParamList>
            <smpcmn:param name="queue_request_flag">yes</smpcmn:param>
            <smpcmn:param name="has_groups">yes</smpcmn:param>
        </smp:orderParamList>
        <smp:orderItemList>
<!-- ********** 0 - delete service ********** -->
            <smp:orderItem>
                <smp:action>delete</smp:action>
                <smp:itemParamList/>
                <smpsa:entityKey xmlns:smp="http://www.sigma-systems.com/schemas/3.1/SmpCBEServiceSchema"
                                 xsi:type="smp:SubSvcKeyType">
                    <cmn:type>SubSvcSpec:cable_broadband</cmn:type>
                    <smp:externalKey>cable_broadband_20001</smp:externalKey>
                </smpsa:entityKey>
                <smpsa:entityValue xmlns:smp="http://www.sigma-systems.com/schemas/3.1/SmpCBEServiceSchema"
                                   xsi:type="smp:SubSvcType">
                    <cbesvc:serviceState xmlns:smp="http://www.sigma-systems.com/schemas/3.1/SmpServiceActivationSchema"
                                         provisionState="deleted" xsi:type="smp:SubSvcStateType">inactive
                    </cbesvc:serviceState>
                    <smp:serviceKey>
                        <cmn:type>SubSvcSpec:cable_broadband</cmn:type>
                        <smp:externalKey>cable_broadband_20001</smp:externalKey>
                    </smp:serviceKey>
                    <smp:childServiceList>
                        <smp:serviceValue>
                            <cbesvc:serviceState
                                    xmlns:smp="http://www.sigma-systems.com/schemas/3.1/SmpServiceActivationSchema"
                                    provisionState="deleted" xsi:type="smp:SubSvcStateType">inactive
                            </cbesvc:serviceState>
                            <smp:serviceKey>
                                <cmn:type>SubSvcSpec:internet_access</cmn:type>
                                <smp:externalKey>internet_access_20002</smp:externalKey>
                            </smp:serviceKey>
                            <smp:parentServiceKey>
                                <cmn:type>SubSvcSpec:cable_broadband</cmn:type>
                                <smp:externalKey>cable_broadband_20001</smp:externalKey>
                            </smp:parentServiceKey>
                            <smp:paramList>
                            </smp:paramList>
                            <smp:associationList>
                                <smpcbe:association>
                                    <smpcbe:associationType>service_on_address</smpcbe:associationType>
                                    <smp:zEndKey xmlns:smp="http://www.sigma-systems.com/schemas/3.1/SmpCBECoreSchema"
                                                 xsi:type="smp:SubAddressKeyType">
                                        <cmn:type>SubAddress</cmn:type>
                                        <smp:externalKey>primary</smp:externalKey>
                                    </smp:zEndKey>
                                </smpcbe:association>
                                <smpcbe:association>
                                    <smpcbe:associationType>internet_access_has_emta_cm</smpcbe:associationType>
                                    <smpcbe:zEndKey xsi:type="smp:SubSvcKeyType">
                                        <cmn:type>SubSvcSpec:smp_emta_cm_hsd_access</cmn:type>
                                        <smp:externalKey>smp_emta_cm_hsd_access_30002</smp:externalKey>
                                    </smpcbe:zEndKey>
                                </smpcbe:association>
                            </smp:associationList>
                        </smp:serviceValue>
                        <smp:serviceValue>
                            <cbesvc:serviceState
                                    xmlns:smp="http://www.sigma-systems.com/schemas/3.1/SmpServiceActivationSchema"
                                    provisionState="deleted" xsi:type="smp:SubSvcStateType">inactive
                            </cbesvc:serviceState>
                            <smp:serviceKey>
                                <cmn:type>SubSvcSpec:std_cpe</cmn:type>
                                <smp:externalKey>std_cpe_30002</smp:externalKey>
                            </smp:serviceKey>
                            <smp:parentServiceKey>
                                <cmn:type>SubSvcSpec:cable_broadband</cmn:type>
                                <smp:externalKey>cable_broadband_20001</smp:externalKey>
                            </smp:parentServiceKey>
                            <smp:associationList>
                                <smpcbe:association>
                                    <smpcbe:associationType>service_on_address</smpcbe:associationType>
                                    <smp:zEndKey xmlns:smp="http://www.sigma-systems.com/schemas/3.1/SmpCBECoreSchema"
                                                 xsi:type="smp:SubAddressKeyType">
                                        <cmn:type>SubAddress</cmn:type>
                                        <smp:externalKey>primary</smp:externalKey>
                                    </smp:zEndKey>
                                </smpcbe:association>
                            </smp:associationList>
                        </smp:serviceValue>
                    </smp:childServiceList>
                </smpsa:entityValue>
            </smp:orderItem>
<!-- ********** 1 - delete service ********** -->
            <smp:orderItem>
                <smp:action>delete</smp:action>
                <smp:itemParamList/>
                <smpsa:entityKey xmlns:smp="http://www.sigma-systems.com/schemas/3.1/SmpCBEServiceSchema"
                                 xsi:type="smp:SubSvcKeyType">
                    <cmn:type>SubSvcSpec:cpe_composed</cmn:type>
                    <smp:externalKey>cpe_composed_30001</smp:externalKey>
                </smpsa:entityKey>
                <smpsa:entityValue xmlns:smp="http://www.sigma-systems.com/schemas/3.1/SmpCBEServiceSchema"
                                   xsi:type="smp:SubSvcType">
                    <cbesvc:serviceState xmlns:smp="http://www.sigma-systems.com/schemas/3.1/SmpServiceActivationSchema"
                                         provisionState="deleted" xsi:type="smp:SubSvcStateType">inactive
                    </cbesvc:serviceState>
                    <smp:serviceKey>
                        <cmn:type>SubSvcSpec:cpe_composed</cmn:type>
                        <smp:externalKey>cpe_composed_30001</smp:externalKey>
                    </smp:serviceKey>
                    <smp:childServiceList>
                        <smp:serviceValue>
                            <cbesvc:serviceState
                                    xmlns:smp="http://www.sigma-systems.com/schemas/3.1/SmpServiceActivationSchema"
                                    provisionState="deleted" xsi:type="smp:SubSvcStateType">inactive
                            </cbesvc:serviceState>
                            <smp:serviceKey>
                                <cmn:type>SubSvcSpec:smp_emta_cm_hsd_access</cmn:type>
                                <smp:externalKey>smp_emta_cm_hsd_access_30002</smp:externalKey>
                            </smp:serviceKey>
                            <smp:parentServiceKey>
                                <cmn:type>SubSvcSpec:cpe_composed</cmn:type>
                                <smp:externalKey>cpe_composed_30001</smp:externalKey>
                            </smp:parentServiceKey>
                            <smp:paramList>
                            </smp:paramList>
                            <smp:associationList>
                                <smpcbe:association>
                                    <smpcbe:associationType>service_on_address</smpcbe:associationType>
                                    <smp:zEndKey xmlns:smp="http://www.sigma-systems.com/schemas/3.1/SmpCBECoreSchema"
                                                 xsi:type="smp:SubAddressKeyType">
                                        <cmn:type>SubAddress</cmn:type>
                                        <smp:externalKey>primary</smp:externalKey>
                                    </smp:zEndKey>
                                </smpcbe:association>
                            </smp:associationList>
                        </smp:serviceValue>
                    </smp:childServiceList>
                </smpsa:entityValue>
            </smp:orderItem>
        </smp:orderItemList>
    </smp:orderValue>
</smpsa:executeOrderRequest>